(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{49:function(e,t,n){e.exports=n(68)},58:function(e,t,n){},62:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(41),c=n.n(a),s=(n(58),n(36)),i=n.n(s),u=n(25),l=n(42),h=n(15),f=(n(62),n(87)),d=n(82),m=n(89),p=n(90);var g=function(e){return o.a.createElement(f.a,{key:e.show.id,elevation:10,sx:{backgroundColor:"rgb(0, 30, 60)",padding:2,width:"300px"}},o.a.createElement(d.a,{alignItems:"center",spacing:1},o.a.createElement(m.a,{variant:"h4",color:"white"},e.show.title),o.a.createElement("img",{src:e.show.img_link,alt:"shows cover",style:{width:"80%"}}),o.a.createElement(m.a,{variant:"subtitle1"},o.a.createElement(p.a,{href:e.show.imdb_link,underline:"hover",target:"_blank",rel:"noreferrer noopener"},"imdb score: ",e.show.imdb_score))))};var b=function(){return o.a.createElement(d.a,{padding:1,position:"fixed",left:"0",bottom:"0",width:"100vw",bgcolor:"rgb(0, 30, 60)",direction:"row",justifyContent:"center"},o.a.createElement(m.a,{color:"white"}," ","built by"," ",o.a.createElement(p.a,{href:"https://github.com/guitrentini96",underline:"hover",target:"_blank",rel:"noopener",sx:{color:"white"}},"Guilherme Campara")," ",":)"))},w=n(85),E=n(91),v=n(92);var S=function(){var e=o.a.useState({options:[],questions:[],currentQuestion:1,testStarted:!1,testEnded:!1,currentScores:[5,5,5,5,5,5],shows:[]}),t=Object(h.a)(e,2),n=t[0],r=t[1];o.a.useEffect(function(){(function(){var e=Object(l.a)(i.a.mark(function e(){var t,o,a,c,s,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/questions/");case 2:return t=e.sent,e.next=5,t.json();case 5:return o=e.sent,console.log("these are the questions:"),console.log(o),e.next=10,fetch("http://localhost:8000/api/options/");case 10:return a=e.sent,e.next=13,a.json();case 13:return c=e.sent,console.log("these are the options:"),console.log(c),e.next=18,fetch("http://localhost:8000/api/shows/");case 18:return s=e.sent,e.next=21,s.json();case 21:l=e.sent,console.log("these are the shows:"),console.log(l),r(Object(u.a)({},n,{questions:o,options:c,shows:l}));case 25:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()().catch(console.error)},[]);var a,c=function(e){var t=n.options.filter(function(t){return t.id===parseInt(e.target.value)})[0],o=[t.humor_factor,t.thriller_factor,t.romance_factor,t.drama_factor,t.horror_factor,t.family_factor],a=n.currentScores.map(function(e,t){return e+o[t]<0?0:e+o[t]>10?10:e+o[t]});console.log("selected the option with id ".concat(e.target.value)),n.questions.length===n.currentQuestion?r(Object(u.a)({},n,{testEnded:!0,currentScores:a})):r(Object(u.a)({},n,{currentQuestion:n.currentQuestion+1,currentScores:a}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,null,o.a.createElement(d.a,{mt:2,mb:8,alignItems:"center",spacing:5,justifyContent:"center"},o.a.createElement(m.a,{variant:"h3",component:"h1"},n.testStarted?n.testEnded?"Here are your results :":(a=n.currentQuestion,console.log("rendering the next question. the current scores are ".concat(n.currentScores)),n.questions.filter(function(e){return parseInt(e.number)===a})[0].title):"Welcome to this TV-show picker, let's start the test !"),n.testStarted?n.testEnded?o.a.createElement(d.a,{spacing:2,sx:{justifyContent:"center"}},function(){var e=n.shows.map(function(e){var t=Math.abs(e.humor_score-n.currentScores[0])+Math.abs(e.thriller_score-n.currentScores[1])+Math.abs(e.romance_score-n.currentScores[2])+Math.abs(e.drama_score-n.currentScores[3])+Math.abs(e.horror_score-n.currentScores[4])+Math.abs(e.family_score-n.currentScores[5]);return e.difference=t,e});e.sort(function(e,t){return e.difference<t.difference?-1:e.difference>t.difference?1:0}),console.log("after sorted, the new list looks like this:"),console.log(e);var t=e.slice(0,3);return console.log("the top 3 are:"),console.log(t),t.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(g,{show:e}))})}()):o.a.createElement(v.a,{orientation:"vertical",size:"large"},function(e){var t=n.questions.filter(function(t){return t.number===e})[0].id;return n.options.filter(function(e){return e.question===t}).map(function(e){return o.a.createElement(w.a,{value:e.id,key:e.id,onClick:c},e.title)})}(n.currentQuestion)):o.a.createElement(w.a,{variant:"contained",onClick:function(){return r(Object(u.a)({},n,{testStarted:!0}))}},"start"),n.testEnded?o.a.createElement(w.a,{variant:"outlined",onClick:function(){return r(Object(u.a)({},n,{currentQuestion:1,testStarted:!1,testEnded:!1,currentScores:[5,5,5,5,5,5]}))}},"Try again"):""),o.a.createElement(b,null)))},_=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,84)).then(function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S,null))),_()}},[[49,3,2]]]);
//# sourceMappingURL=main.47903246.chunk.js.map